
@{
    ViewBag.Title = "Category Admin";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="container-fluid">
    <div id="tree"></div>
</div>

@section scripts
{
    <script type="text/javascript">
        $(document).ready(function () {
            populateNode();
            function populateNode() {
                $.ajax({
                    url: "/category/get", 
                    dataType: "json",
                    success: function (result) {
                        if (result.success = "true") {
                            if (result.length > 0) {
                                var newnode = "<ul>"  
                                $.each(result, function (index, item) {

                                    newnode += "<li class='note' data-id =" + item.Id + " >" + item.Name + " </li>"
                                })
                                newnode += "</ul>";

                                $(newnode).appendTo("#tree");
                            }
                        }
                    },
                    error: function (xhr) {
                        alert("error");
                    }
                });
            }

            $(".note").click(function () {
                var currentNode = $(this); 
                var value = currentNode.attr("data-id");  //get current node id
                
            });
        });
    </script>
}