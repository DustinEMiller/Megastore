@using System.Linq
@model List<Megastore.Models.Category>

<a href="#" class="dropdown-toggle" data-toggle="dropdown">Categories <b class="caret"></b></a>
<div class="dropdown-menu dropdown-multicol" aria-labelledby="dropdownMenuButton">
@{ int prodsPerColumn = 4; int extraCats = @Model.Count() % prodsPerColumn; }
@for (int i = 0; i < @Model.Count(); i += prodsPerColumn) {
<div class="dropdown-col">
    @if (i + prodsPerColumn + extraCats == @Model.Count()) {
        prodsPerColumn += extraCats;
    }
    @foreach (var category in Model.Skip(i).Take(prodsPerColumn)) {
        @Html.ActionLink(@category.Name, "ListAsync", "Category", new { Id = @category.Id }, new { @class= "dropdown-item" })
    }
</div>
}
</div>